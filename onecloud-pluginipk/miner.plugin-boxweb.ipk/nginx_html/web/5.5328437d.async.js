(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{euXX:function(e,t,a){e.exports={settingContainer:"settingContainer___3eymh",title:"title___Nb9q-",formWrap:"formWrap___2dMPx",pwdCtrl:"pwdCtrl___2aKnw"}},"nFX+":function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("jehZ"));a("+L6B");var s=n(a("2/Rp"));a("Pwec");var d=n(a("CtXQ"));a("5NDa");var u=n(a("5rEg"));a("miYZ");var i=n(a("tsqr")),o=n(a("p0pE"));a("2qtc");var f=n(a("kLXV")),p=n(a("2Taf")),c=n(a("vZ4D")),m=n(a("MhPg")),v=n(a("l4Ni")),g=n(a("ujKo"));a("OaEy");var y=n(a("2fM7"));a("y8nQ");var h,w,b,E,k=n(a("Vl3Y")),N=l(a("q1tI")),C=a("MuoO"),S=n(a("euXX"));function _(e){var t=P();return function(){var a,n=(0,g.default)(e);if(t){var l=(0,g.default)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return(0,v.default)(this,a)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var D=k.default.Item,I=y.default.Option,q=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(25[0-5]|2[0-4]\d|[01]?\d\d?)$/,F=[{name:"\u624b\u52a8\u65b9\u5f0f\uff08\u9759\u6001IP\uff09",value:"static"},{name:"\u52a8\u6001\u83b7\u53d6\uff08DHCP\uff09",value:"dhcp"},{name:"PPPoE\u62e8\u53f7",value:"pppoe"}],V=(h=(0,C.connect)(function(e){var t=e.device,a=e.loading;return{device:t,loading:a.effects["device/setNetwork"]}}),w=k.default.create(),h(b=w((E=function(e){(0,m.default)(a,e);var t=_(a);function a(e){var n;return(0,p.default)(this,a),n=t.call(this,e),n.getNetwork=function(){var e=n.props,t=e.dispatch,a=e.form.setFieldsValue;t({type:"device/getNetwork",callback:function(e){if(0===e.error_code){var t=e.type,l=e.ip,r=e.netmask,s=e.gateway,d=e.dns1,u=e.dns2;n.setState({type:t,networkInfo:e}),"pppoe"!==t&&a({ip:l,netmask:r,gateway:s,dns1:d,dns2:u})}}})},n.handleTypeChange=function(e){n.setState({type:e},function(){if("pppoe"!==n.state.type){var e=n.state.networkInfo,t=e.ip,a=e.netmask,l=e.gateway,r=e.dns1,s=e.dns2;n.props.form.setFieldsValue({ip:t,netmask:a,gateway:l,dns1:r,dns2:s})}})},n.confirmSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e){e||f.default.confirm({title:"\u786e\u4fdd\u5bbd\u5e26\u8d26\u53f7\u548c\u5bc6\u7801\u6b63\u786e\uff0c\u5982\u914d\u7f6e\u9519\u8bef\uff0c\u9700\u8981\u6062\u590d\u51fa\u5382\u540e\u91cd\u65b0\u8bbe\u7f6e",onOk:function(){n.handleSubmit()}})})},n.handleSubmit=function(e){e&&e.preventDefault();var t,a=n.state.type;n.props.form.validateFields(function(e,l){if(!e){if("dhcp"===a)t={type:a};else if("static"===a){var r=l.ip,s=l.netmask,d=l.gateway,u=l.dns1,f=l.dns2;if(t={type:a,ip:r,netmask:s,gateway:d},u||f){var p={dnstype:"manual"};u&&(p.dns1=u),f&&(u?p.dns2=f:(n.props.form.setFieldsValue({dns1:f,dns2:""}),p.dns1=f)),Object.assign(t,p)}else Object.assign(t,{dnstype:"automatic"})}else"pppoe"===a&&(t=(0,o.default)({type:a},l));n.props.dispatch({type:"device/setNetwork",payload:t,callback:function(e){0===e.error_code?(i.default.success("\u4fdd\u5b58\u6210\u529f"),"pppoe"===a&&n.getNetwork()):i.default.error(e.msg||"\u4fdd\u5b58\u5931\u8d25")}})}})},n.handlePasswordStatus=function(){var e=n.state.passwordVisible;n.setState({passwordVisible:!e})},n.state={type:F[0].value,networkInfo:null,passwordVisible:!1},n}return(0,c.default)(a,[{key:"componentDidMount",value:function(){this.getNetwork()}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.loading,n=t.getFieldDecorator,l=this.state,i=l.type,o=l.networkInfo,f=l.passwordVisible,p={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:8}}},c={wrapperCol:{xs:{span:24,offset:0},sm:{span:8,offset:6}}};return N.default.createElement("div",{className:S.default.settingContainer},N.default.createElement("div",{className:S.default.title},"\u8bbe\u7f6e\u60a8\u7684\u8bbe\u5907\u63a5\u5165\u65b9\u5f0f"),N.default.createElement("div",{className:S.default.formWrap},N.default.createElement(k.default,(0,r.default)({},p,{onSubmit:"pppoe"===i?this.confirmSubmit:this.handleSubmit}),N.default.createElement(D,{label:"\u8fde\u63a5\u7f51\u7edc\u7c7b\u578b"},N.default.createElement("div",null,"\u7f51\u7ebf\u8fde\u63a5"),N.default.createElement(y.default,{value:i,onChange:this.handleTypeChange},F.map(function(e,t){return N.default.createElement(I,{key:"".concat(t),value:e.value},e.name)}))),("static"===i||"dhcp"===i)&&N.default.createElement(N.default.Fragment,null,N.default.createElement(D,{label:"IP\u5730\u5740"},n("ip",{rules:[{required:"static"===i,message:"\u8bf7\u8f93\u5165IP\u5730\u5740"},{pattern:q,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684IP\u5730\u5740"}]})(N.default.createElement(u.default,{disabled:"dhcp"===i}))),N.default.createElement(D,{label:"\u5b50\u7f51\u63a9\u7801"},n("netmask",{rules:[{required:"static"===i,message:"\u8bf7\u8f93\u5165\u5b50\u7f51\u63a9\u7801"},{pattern:q,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5b50\u7f51\u63a9\u7801"}]})(N.default.createElement(u.default,{disabled:"dhcp"===i}))),N.default.createElement(D,{label:"\u9ed8\u8ba4\u7f51\u5173"},n("gateway",{rules:[{required:"static"===i,message:"\u8bf7\u8f93\u5165\u9ed8\u8ba4\u7f51\u5173"},{pattern:q,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u9ed8\u8ba4\u7f51\u5173"}]})(N.default.createElement(u.default,{disabled:"dhcp"===i}))),N.default.createElement(D,{label:"\u9996\u9009DNS"},n("dns1",{rules:[{pattern:q,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684DNS"}]})(N.default.createElement(u.default,{disabled:"dhcp"===i}))),N.default.createElement(D,{label:"\u5907\u7528DNS"},n("dns2",{rules:[{pattern:q,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684DNS"}]})(N.default.createElement(u.default,{disabled:"dhcp"===i})))),"pppoe"===i&&N.default.createElement(N.default.Fragment,null,N.default.createElement(D,{label:"\u5bbd\u5e26\u8d26\u53f7"},o&&o.username?N.default.createElement("span",null,o.username):n("username",{rules:[{required:"pppoe"===i,message:"\u8bf7\u8f93\u5165\u5bbd\u5e26\u8d26\u53f7",transform:function(e){return e&&e.trim()}}]})(N.default.createElement(u.default,{maxLength:128}))),N.default.createElement(D,{label:"\u5bbd\u5e26\u5bc6\u7801"},o&&o.password?N.default.createElement("span",null,f?o.password:"******",N.default.createElement("span",{className:S.default.pwdCtrl,onClick:this.handlePasswordStatus},N.default.createElement(d.default,{type:f?"eye":"eye-invisible"}))):n("password",{rules:[{required:"pppoe"===i,message:"\u8bf7\u8f93\u5165\u5bbd\u5e26\u5bc6\u7801",transform:function(e){return e&&e.trim()}}]})(N.default.createElement(u.default,{maxLength:128})))),!("pppoe"===i&&o&&o.username&&o.password)&&N.default.createElement(D,c,N.default.createElement(s.default,{type:"primary",htmlType:"submit",loading:a},"\u4fdd\u5b58")))))}}]),a}(N.Component),b=E))||b)||b);t.default=V}}]);